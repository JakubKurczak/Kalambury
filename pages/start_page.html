<html>

<head>
    <title>Kalambury</title>
    <style>

    </style>
</head>

<body>
    <h1>Welcome to Kalambury</h1>
    <div id="choices">
        <form>
            <label for="room_name">Room name:</label>
            <input type="text" id="room_name">
            <label for="player_name">Player name:</label>
            <input type="text" id="player_name">
        </form>
        <button id="make_game_button">Make game</button>
        <button id="join_game_button">Join game</button>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $('#make_game_button').click(function () {
            var room_name = $("#room_name").val();
            var player_name = $("#player_name").val();
            var url = "http://localhost:4000/make_game";
            var data = {
                room_name: room_name,
                player_name: player_name,
            };
            $.ajax({
                url: url,
                async: true,
                type: 'POST',
                data: JSON.stringify(data),
                contentType: 'application/json', // <---add this
                dataType: 'text',
                success: function (result) {
                    window.location.replace("http://localhost:4000/game");
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    switch (XMLHttpRequest.status) {
                        case 409:
                            alert("Player or room with chosen name already exists");
                            break;
                        default:
                            alert("unknown error");
                            break;
                    }
                }
            });
        });
        $('#join_game_button').click(function () {
            var room_name = $("#room_name").val();
            var player_name = $("#player_name").val();
            var url = "http://localhost:4000/join_game";
            var data = {
                room_name: room_name,
                player_name: player_name,
            };
            $.ajax({
                url: url,
                async: true,
                type: 'POST',
                data: JSON.stringify(data),
                contentType: 'application/json', // <---add this
                dataType: 'text',
                success: function (result) {
                    window.location.replace("http://localhost:4000/game");
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    switch (XMLHttpRequest.status) {
                        case 404:
                            alert("There is no room with that name.");
                            break;
                        case 409:
                            alert("Player with chosen name already exists");
                            break;
                        default:
                            alert("unknown error");
                            break;
                    }
                }
            });
        });
    </script>
</body>

</html>